<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" href="peering.css" />
<script src="peering.js"></script>
<script>

"use strict";

Hub.connect('sync',
    function() {
        $hide('welcome');
        $show('waiting');
        $('logo').classList.add('spun');
    }
);

Hub.connect('enter_secret',
    function() {
        $hide('waiting');
        $hide('logo');
        $show('enter_secret');
    }
);


var UI = {
    on_load: function() {
        UI.input = $('input');
        UI.input.oninput = UI.on_input;
        $show('welcome');
    },

    on_input: function(event) {
        UI.input.value = UI.input.value.toUpperCase();
        if (UI.input.value.length == 8) {
            $('finish').classList.remove('hidden');
        }
        else {
            $('finish').classList.add('hidden');
        }
    },
}


window.onload = UI.on_load;

</script>
</head>
<body>

<img src="novacut.svg" id="logo">

<div id="welcome" class="hide">
    <div id="first" onclick="Hub.send('first')">
    <p class="top">
    This is my first time using Novacut
    </p>
    <p>
    (You can add more devices later)
    </p>
    </div>

    <div id="sync" onclick="Hub.send('sync')">
    <p class="top">
    I'm already using Novacut
    </p>
    <p>
    Sync with my other devices!
    </p>
    </div>
</div>

<div id="waiting" class="hide">
    <p class="gen">
    Accept the peering offer on your other device
    </p>
</div>

<div id="enter_secret" class="hide">
    <p class="gen">
    Enter your secret code:
    </p>
    <div class="secret">
    <input id="input" type="text" maxlength="8" size="8" autofocus="1"></input>
    </div>
    <img src="sync.svg" id="finish" class="hidden">
</div>

</body>
</html>
